{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/scripts/backpack.js","webpack:///./src/scripts/config.js","webpack:///./src/scripts/events.js","webpack:///./src/scripts/keyboard.js","webpack:///./src/scripts/entities.js","webpack:///./src/scripts/world.js","webpack:///./src/scripts/utils.js","webpack:///./src/scripts/character.js","webpack:///./src/scripts/textprompt.js","webpack:///./src/scripts/slide.js","webpack:///./src/scripts/actionEvents.js","webpack:///./src/scripts/hunger.js","webpack:///./src/scripts/particles.js","webpack:///./src/scripts/thermometer.js","webpack:///./src/scripts/index.js","webpack:///./src/scripts/localsettings.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","BackpackBar","constructor","this","container","PIXI","width","getComponent","renderBackpack","items","removeChildren","sprite","sprites","item","resources","texture","getSprites","addChild","config","debug","E_PLAYER_MOVED","E_SET_WORLD_LOCK","E_ENTITY_DISPATCH_ACTIONS","E_DESTROY_ENTITY","E_SET_GLOBAL","E_INC_GLOBAL","E_APPEND_GLOBAL","E_DEPEND_GLOBAL","E_GO_TO_WORLD","E_ABORT_EVENT_FLOW","E_START_QUEUING_EVENTS","E_STOP_QUEUING_EVENTS","E_ADD_HUNGER","E_RUN_EVENTS","E_SET_WEATHER_INTENSITY","E_ADD_BACKPACK_ITEM","E_DID_UPDATE_BACKPACK_CONTENTS","E_SET_TEMPRATURE","E_SET_CHARACTER_OPACITY","EE","EventEmitter","addDebugLogger","event","on","console","log","Config","KEY_DOWN","KEY_UP","KEY_LEFT","KEY_RIGHT","KEY_SPACE","KEY_ESCAPE","KeyboardEventHandler","keyCode","onPress","onRelease","assign","isKeyDown","isKeyUp","allowRepeat","bindListeners","addEventListener","downHandler","upHandler","evt","preventDefault","Entity","x","y","entitySpec","id","anchor","set","TILE_SIZE","tileScale","height","flip","events","dispatchInteractionActions","movementLocked","isWalkable","walkable","emit","ticker","delta","character","move","_doMove","moveIndex","speed","moveSpeed","target","xDiff","yDiff","movedX","movedY","Math","abs","collidesWith","FishEntity","random","super","type","content","startY","time","sinTime","sin","rotation","PI","DEFAULT_WEATHER_INTENSITY","FISH_CHANCE","randomisedTiles","ice_m1","ice_m2","ice_m3","Tile","solid","trim","loadSprite","[object Object]","textureLocation","idx","min","max","floor","getRandomInt","fromImage","World","world","entities","tileData","fileToTileData","loadWorld","loadWorldSpec","inCollision","Set","forEach","e","index","indexOf","removeChild","row","tile","createTile","createFish","fish","worldSpec","yaml","safeLoad","placeEntities","intensity","initialWeatherIntensity","worldData","rows","split","entity","parts","img","gridSpace","getTile","isSolid","isPositionOkay","xt","round","yt","collidesAt","collidees","add","getStartingPosition","playerStart","updateCollisionStates","newCollidees","collidee","has","delete","doDetectCollisions","WorldContainer","uiContainer","values","worldChangeCallbacks","registerEventListeners","vals","concat","setSepia","sepia","alpha","doCheck","val","check","error","registerWorldChangeCallback","fn","worldId","_setWorld","hideCharacter","cb","entity_x","entity_y","entity_w","entity_h","tileToGlobal","size","MOVE_PER_TICK","STEP_HUNGER_TIME","STEP_HUNGER_REMOVAL","PlayerMovedContext","Character","stepTimer","animationFrames","b","makeAnimation","f","backpack","animation","AnimatedSprite","animationSpeed","play","moveDown","moveUp","moveLeft","moveRight","keyboardTick","stop","velocityX","velocityY","loadPlayerSpec","loader","Loader","load","playerSpec","onComplete","dir","frames","fromFrame","moveBy","hasMoved","textures","newY","newX","getLocation","setLocation","getX","getY","TEXT_PADDING","BOX_MARGIN","TextPrompt","text","w","h","conf","parentContainer","finishCallback","speakerName","textLen","timer","dismissHandler","textComponent","fontFamily","fontSize","wordWrap","wordWrapWidth","graphics","_makeBackground","readyPrompt","_makeReadyPrompt","par","scale","flipSide","lineStyle","beginFill","drawRoundedRect","endFill","onFinish","getTextStringWithSpeaker","substr","finished","_hasprompt","flopped","Slide","image","worldContainer","setupContainer","runEvents","hitboxes","GameApp","renderer","startX","hitbox","showIf","show","case","hitboxarea","interactive","triggerEvent","callback","disabled","aborted","EventQueue","eventQueue","queueEvents","eventSpec","onDone","dispatchQueuedEvents","dispatcher","queuedEvents","ev","ActionEventHandler","worldWidth","worldHeight","currentEventKey","tickers","currentEventKeys","abortingFlow","_dispatchQueuedEvents","_runEvents","loadEvents","doEvent","shouldAbort","_shouldAbortEvent","_getEventKey","eventChain","eventHandler","makeEventHandler","newTextHandler","newSlideHandler","newEventDispatcher","newCheck","newQuitEventFlow","newDelayEventsFlow","alreadyFinished","async","setTimeout","prompt","speaker_name","slide","done","HungerMeter","hunger","setBar","fishIcon","diff","addHunger","bar","colour","snowEmitter","maxParticles","spawnChance","minimumSpeedMultiplier","Thermometer","temperature","drawCircle","thermoIcon","temp","setTemperature","keys","__webpack_exports__","FULL_WIDTH","DEFAULT_WORLD_ID","innerWidth","innerHeight","backgroundColor","initGame","document","body","appendChild","view","background","tilingBackground","TilingSprite","getBackground","stage","bgTicker","cos","startingPosition","_","clouds","blendMode","getClouds","Emitter","start","end","minimumScaleMultiplier","color","acceleration","maxSpeed","startRotation","noRotation","rotationSpeed","lifetime","frequency","emitterLifetime","pos","addAtBack","spawnType","spawnRect","update","newSnow","hungerMeter","backpackBar","backpackComponent","thermometer","screen","context","vignette","pivot","xx","yy","setWorld","loadRootAssets","worldLoader","worlds"],"mappings":"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","file":"js/app.027c2343.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([229,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as PIXI from \"pixi.js\";\n\nexport class BackpackBar {\n    constructor() {\n        this.container = new PIXI.Container();\n        this.container.width = 100;\n    }\n\n    getComponent() {\n        return this.container;\n    }\n\n    renderBackpack(items) {\n        this.container.removeChildren();\n        for (let sprite of getSprites(items)) {\n            this.container.addChild(sprite);\n        }\n    }\n}\n\nfunction getSprites(items) {\n    let sprites = [];\n    for (let item of items) {\n        sprites.push(new PIXI.Sprite(\n            PIXI.loader.resources[item].texture\n        ));\n    }\n    return sprites;\n}\n","export default {\n    \"debug\": true,\n};\n","import EventEmitter from 'eventemitter3';\nimport Config from \"./config\";\n\nexport const E_PLAYER_MOVED = 'PLAYER_MOVED';\nexport const E_SET_WORLD_LOCK = 'SET_WORLD_LOCK';\nexport const E_ENTITY_DISPATCH_ACTIONS = 'ENTITY_DISPATCH_ACTIONS';\nexport const E_DESTROY_ENTITY = 'DESTROY_ENTITY';\nexport const E_SET_GLOBAL = 'SET_GLOBAL';\nexport const E_INC_GLOBAL = 'INC_GLOBAL';\nexport const E_APPEND_GLOBAL = 'APPEND_GLOBAL';\nexport const E_DEPEND_GLOBAL = 'DEPEND_GLOBAL';\nexport const E_GO_TO_WORLD = 'GO_TO_WORLD';\nexport const E_ABORT_EVENT_FLOW = 'ABORT_EVENT_FLOW';\nexport const E_START_QUEUING_EVENTS = 'START_QUEUING_EVENTS';\nexport const E_STOP_QUEUING_EVENTS = 'STOP_QUEUING_EVENTS';\nexport const E_ADD_HUNGER = 'ADD_HUNGER';\nexport const E_RUN_EVENTS = 'RUN_EVENTS';\nexport const E_SET_WEATHER_INTENSITY = 'SET_WEATHER_INTENSITY';\nexport const E_ADD_BACKPACK_ITEM = 'ADD_BACKPACK_ITEM';\nexport const E_DID_UPDATE_BACKPACK_CONTENTS = 'DID_UPDATE_BACKPACK_CONTENTS';\nexport const E_SET_TEMPRATURE = 'SET_TEMPERATURE';\nexport const E_SET_CHARACTER_OPACITY = 'SET_CHARACTER_OPACITY';\n\nlet EE = new EventEmitter();\n\nfunction addDebugLogger(event) {\n    EE.on(event, () => {\n        console.log('Received event: ' + event);\n    });\n}\n\nif (Config.debug) {\n    addDebugLogger(E_SET_WORLD_LOCK);\n    addDebugLogger(E_ENTITY_DISPATCH_ACTIONS);\n    addDebugLogger(E_DESTROY_ENTITY);\n    addDebugLogger(E_SET_GLOBAL);\n    addDebugLogger(E_INC_GLOBAL);\n    addDebugLogger(E_APPEND_GLOBAL);\n    addDebugLogger(E_DEPEND_GLOBAL);\n    addDebugLogger(E_GO_TO_WORLD);\n    addDebugLogger(E_ABORT_EVENT_FLOW);\n    addDebugLogger(E_START_QUEUING_EVENTS);\n    addDebugLogger(E_STOP_QUEUING_EVENTS);\n    addDebugLogger(E_ADD_HUNGER);\n    addDebugLogger(E_RUN_EVENTS);\n    addDebugLogger(E_SET_WEATHER_INTENSITY);\n    addDebugLogger(E_ADD_BACKPACK_ITEM);\n    addDebugLogger(E_DID_UPDATE_BACKPACK_CONTENTS);\n}\n\nexport default EE;\n","\nexport const KEY_DOWN = 40;\nexport const KEY_UP = 38;\nexport const KEY_LEFT = 37;\nexport const KEY_RIGHT = 39;\nexport const KEY_SPACE = 32;\nexport const KEY_ESCAPE = 27;\n\n\nexport class KeyboardEventHandler {\n    constructor(keyCode, onPress = null, onRelease = null) {\n        // default properties\n        Object.assign(this, {\n            \"isKeyDown\": false,\n            \"isKeyUp\": true,\n        });\n\n        this.allowRepeat = true;\n        this.keyCode = keyCode;\n\n        if (onPress !== null) {\n            this.onPress = onPress;\n        }\n        if (onRelease !== null) {\n            this.onRelease = onRelease;\n        }\n    }\n\n    bindListeners() {\n        window.addEventListener(\n            \"keydown\", this.downHandler.bind(this), false\n        );\n        window.addEventListener(\n            \"keyup\", this.upHandler.bind(this), false\n        );\n    }\n\n    downHandler(evt) {\n        if (evt.keyCode === this.keyCode) {\n            if (this.allowRepeat || !this.isKeyDown) {\n                this.isKeyDown = true;\n                this.isKeyUp = false;\n                this.onPress();\n            }\n        }\n        evt.preventDefault();\n    }\n\n    upHandler(evt) {\n        if (evt.keyCode === this.keyCode) {\n            this.isKeyDown = false;\n            this.isKeyUp = true;\n            this.onRelease();\n        }\n        evt.preventDefault();\n    }\n\n    // default onPress and onRelease handlers\n    onPress() {\n        return;\n    }\n\n    onRelease() {\n        return;\n    }\n}\n","import * as PIXI from \"pixi.js\";\nimport EE, {\n    E_ADD_HUNGER,\n    E_DESTROY_ENTITY,\n    E_ENTITY_DISPATCH_ACTIONS,\n    E_SET_WORLD_LOCK\n} from \"./events\";\nimport { TILE_SIZE } from \"./world\";\n\nexport class Entity {\n    constructor(x, y, texture, entitySpec) {\n        this.id = entitySpec.id || 'ALL_OTHER_ENTITIES';\n        this.entitySpec = entitySpec;\n\n        this.sprite = new PIXI.Sprite(texture);\n\n        // x,y is in the tile coordinate system\n        this.sprite.anchor.set(0.5);\n        this.sprite.x = x * TILE_SIZE;\n        this.sprite.y = y * TILE_SIZE;\n        this.sprite.width = TILE_SIZE * (this.entitySpec.tileScale || 1);\n        this.sprite.height = TILE_SIZE * (this.entitySpec.tileScale || 1);\n\n        if (entitySpec.flip) {\n            this.sprite.width = -this.sprite.width;\n        }\n\n        this.events = entitySpec.events;\n\n        this.dispatchInteractionActions = this.dispatchInteractionActions.bind(this);\n\n        this.movementLocked = false;\n        EE.on(E_SET_WORLD_LOCK, (x) => this.movementLocked = x);\n    }\n\n    isWalkable() {\n        return !!this.entitySpec.walkable;\n    }\n\n    dispatchInteractionActions() {\n        if (this.entitySpec.events) {\n            EE.emit(E_ENTITY_DISPATCH_ACTIONS, this.entitySpec.events);\n        }\n    }\n\n    ticker(delta, character) {\n        if (this.entitySpec.move) {\n            this._doMove(delta, character);\n        }\n    }\n\n    _doMove(delta, character) {\n        if (this.movementLocked) {\n            return;\n        }\n        this.moveIndex = this.moveIndex || 0;\n\n        let speed = this.entitySpec.moveSpeed || 1;\n        let target = this.entitySpec.move[this.moveIndex];\n\n        let xDiff = this.sprite.x - (target.x * TILE_SIZE);\n        let yDiff = this.sprite.y - (target.y * TILE_SIZE);\n\n        let movedX = 0, movedY = 0;\n        if (Math.abs(xDiff) > 10) {\n            movedX = (xDiff > 0 ? -1 : 1) * delta * speed;\n            this.sprite.x += movedX;\n        }\n        if (Math.abs(yDiff) > 10) {\n            movedY = (yDiff > 0 ? -1 : 1) * delta * speed;\n            this.sprite.y += movedY;\n        }\n\n        if (character.collidesWith(this)) {\n            character.sprite.x += movedX;\n            character.sprite.y += movedY;\n        }\n\n        if (Math.abs(xDiff) < 10 && Math.abs(yDiff) < 10) {\n            this.moveIndex = (this.moveIndex+1) % this.entitySpec.move.length;\n        }\n    }\n}\n\nexport class FishEntity extends Entity {\n    constructor(x, y) {\n        let id = Math.random();\n        super(x, y, PIXI.loader.resources['fish'].texture, {\n            id: id,\n            events: [{\n                type: 'event',\n                event: E_ADD_HUNGER,\n                content: 25,\n            }, {\n                type: 'event',\n                event: E_DESTROY_ENTITY,\n                content: id,\n            }]\n        });\n        this.startY = this.sprite.y;\n        this.time = Math.random()*200;\n    }\n\n    ticker(delta, character) {\n        this.time += delta;\n        let sinTime = Math.sin(this.time/15);\n        sinTime = sinTime > 0 ? 0 : sinTime;\n        this.sprite.y = this.startY + (sinTime * 10);\n        this.sprite.rotation = sinTime * Math.PI/10 * Math.random();\n    }\n}","import * as PIXI from \"pixi.js\";\nimport yaml from \"js-yaml\";\n\nimport {\n    E_APPEND_GLOBAL, E_DEPEND_GLOBAL,\n    E_ABORT_EVENT_FLOW,\n    E_START_QUEUING_EVENTS, E_STOP_QUEUING_EVENTS,\n    E_DESTROY_ENTITY,\n    E_INC_GLOBAL,\n    E_SET_GLOBAL,\n    E_GO_TO_WORLD,\n    E_SET_WEATHER_INTENSITY,\n    makeEventHander, E_SET_CHARACTER_OPACITY\n} from \"./events\";\nimport { getRandomInt } from \"./utils\";\n\nimport EE, {\n    E_PLAYER_MOVED,\n} from \"./events\";\nimport { Entity, FishEntity } from \"./entities\";\n\nconst DEFAULT_WEATHER_INTENSITY = 0.0;\n\nexport const TILE_SIZE = 64;\nexport const FISH_CHANCE = 0.002;\n\nlet randomisedTiles = {\n    'ice_m1': ['ice_m1', 'ice_m1a'],\n    'ice_m2': ['ice_m2', 'ice_m2a', 'ice_m2b'],\n    'ice_m3': ['ice_m3', 'ice_m3a']\n};\n\nclass Tile {\n    constructor(x, y, sprite, solid) {\n        this.x = x;\n        this.y = y;\n\n        // Can't move through it\n        this.sprite = sprite.trim() ? Tile.loadSprite(sprite) : null;\n        this.solid = !(this.sprite) || solid;\n        if (this.sprite) {\n            this.sprite.anchor.set(0.5);\n            this.sprite.x = x * TILE_SIZE;\n            this.sprite.y = y * TILE_SIZE;\n            this.sprite.width = TILE_SIZE;\n            this.sprite.height = TILE_SIZE;\n        }\n    }\n\n    static loadSprite(textureLocation) {\n        // create a new Sprite from an image path\n        if (randomisedTiles.hasOwnProperty(textureLocation)) {\n            const idx = getRandomInt(0, randomisedTiles[textureLocation].length - 1);\n            textureLocation = randomisedTiles[textureLocation][idx];\n        }\n        const texture = PIXI.Texture.fromImage('public/assets/sprites/' + textureLocation + '.png');\n        return new PIXI.Sprite(texture);\n    }\n}\n\nclass World {\n    constructor(id) {\n        this.container = new PIXI.Container();\n\n        // Tiles in the world\n        this.world = [];\n\n        // Entities present in the world\n        this.entities = [];\n\n        let tileData = this.fileToTileData(id);\n        this.loadWorld(tileData)\n        this.loadWorldSpec(id);\n\n        this.inCollision = new Set();\n\n        EE.on(E_DESTROY_ENTITY, (id) => {\n            this.entities.forEach((e, i) => {\n                if (e.id === id) {\n                    // Lol we already found it previously\n                    const index = this.entities.indexOf(e);\n                    this.entities.splice(index, 1);\n                    this.container.removeChild(e.sprite);\n                }\n            });\n        });\n    }\n\n    loadWorld(tileData) {\n        this.world = [];\n        for (let y = 0; y < tileData.length; y++) {\n            let row = [];\n            for (let x = 0; x < tileData[y].length; x++) {\n                let tile = this.createTile(x, y, tileData[y][x]);\n                if (tile && Math.random() < FISH_CHANCE) {\n                    this.createFish(x, y);\n                }\n                row.push(tile);\n            }\n            this.world.push(row);\n        }\n    }\n\n    createFish(x, y) {\n        let fish = new FishEntity(x, y);\n        this.container.addChild(fish.sprite);\n        this.entities.push(fish);\n    }\n\n    loadWorldSpec(world) {\n        let worldSpec = PIXI.loader.resources['world' + world + '_spec'].data;\n        this.worldSpec = yaml.safeLoad(worldSpec);\n        this.placeEntities(this.worldSpec.entities);\n\n        const intensity = this.worldSpec.initialWeatherIntensity || DEFAULT_WEATHER_INTENSITY;\n        EE.emit(E_SET_WEATHER_INTENSITY, intensity);\n    }\n\n    fileToTileData(world) {\n        let worldData = PIXI.loader.resources['world' + world + '_tiles'].data;\n        let rows = worldData ? worldData.split(/\\r\\n|\\n/) : '';\n\n        let tileData = [];\n        for (let y = 0; y < rows.length; y++) {\n            tileData.push(rows[y].split(','));\n        }\n        return tileData;\n    }\n\n    placeEntities(entities) {\n        for (let entity of entities) {\n            this.entities.push(new Entity(\n                entity.x, entity.y,\n                PIXI.loader.resources[entity.sprite].texture,\n                entity\n            ));\n        }\n\n        for (let entity of this.entities) {\n            this.container.addChild(entity.sprite);\n        }\n    }\n\n    createTile(x, y, data) {\n        let parts = data.split(',');\n        let img = parts[0];\n        if (img.trim() === '') {\n            return null;\n        }\n        let solid = (parts.length > 1 && parts[1] === 's');\n\n        let gridSpace = new Tile(x, y, img, solid);\n        if (gridSpace.sprite) {\n            this.container.addChild(gridSpace.sprite);\n        }\n        return gridSpace;\n    }\n\n    getTile(x, y) {\n        let row = this.world[y] || [];\n        return row[x];\n    }\n\n    isSolid(x, y) {\n        let tile = this.getTile(x, y);\n        return !tile || tile.solid;\n    }\n\n    isPositionOkay(x, y) {\n        let xt = Math.round(x / TILE_SIZE);\n        let yt = Math.round(y / TILE_SIZE);\n        let solid = !this.isSolid(xt, yt);\n\n        if (solid) {\n            return solid;\n        }\n\n        // Check if the position has entities that are walkable\n        for (let entity of this.entities) {\n            if (collidesWith(entity, x, y)) {\n                if (entity.isWalkable()) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    collidesAt(x, y) {\n        let collidees = new Set();\n        for (let entity of this.entities) {\n            if (collidesWith(entity, x, y)) {\n                collidees.add(entity);\n            }\n        }\n        return collidees;\n    }\n\n    getStartingPosition() {\n        const playerStart = this.worldSpec.playerStart;\n        if (typeof playerStart !== 'undefined' &&\n            playerStart.x && playerStart.y) {\n            return playerStart;\n        } else {\n            // TODO(matt): ensure this is actually on a tile!\n            return {\n                'x': 1,\n                'y': 1,\n            };\n        }\n    }\n\n    updateCollisionStates(newCollidees) {\n        // Entities we are no longer in collision with\n        this.inCollision.forEach((collidee) => {\n            if (!newCollidees.has(collidee)) {\n                this.inCollision.delete(collidee);\n            }\n        });\n\n        // And look for new colliders, and tell them to dispatch actions\n        newCollidees.forEach((collidee) => {\n            if (!this.inCollision.has(collidee)) {\n                this.inCollision.add(collidee);\n                collidee.dispatchInteractionActions();\n            }\n        });\n    }\n\n    doDetectCollisions(x, y) {\n        let collidees = this.collidesAt(x, y);\n        this.updateCollisionStates(collidees);\n    }\n\n    ticker(delta, character) {\n        for (let entity of this.entities) {\n            entity.ticker(delta, character);\n        }\n    }\n}\n\nexport class WorldContainer {\n    constructor(uiContainer) {\n        this.uiContainer = uiContainer;\n\n        this.values = {};\n        this.world = null;\n        this.worldChangeCallbacks = [];\n        this.container = new PIXI.Container();\n        this.registerEventListeners();\n\n        EE.on(E_SET_GLOBAL, (vals) => {\n            this.values[vals.key] = vals.value;\n            console.log('setting values', this.values);\n        });\n        EE.on(E_INC_GLOBAL, (vals) => {\n            this.values[vals.key] = (this.values[vals.key] || 0) + vals.value;\n            console.log('adding values', this.values);\n        });\n        EE.on(E_APPEND_GLOBAL, (vals) => {\n            this.values[vals.key] = (this.values[vals.key] || []).concat([vals.value]);\n            console.log('concat values', this.values);\n        });\n        EE.on(E_DEPEND_GLOBAL, (vals) => {\n            const index = (this.values[vals.key] || []).indexOf(vals.value);\n            if (index) {\n                this.values[vals.key].splice(index, 1);\n            }\n            console.log('depend values', this.values);\n        });\n    }\n\n    setSepia(on) {\n        if (this.sepia && !on) {\n            this.uiContainer.removeChild(this.sepia);\n        } else if (!this.sepia && on) {\n            this.sepia = new PIXI.Sprite(PIXI.loader.resources['sepia'].texture);\n            this.sepia.x = 0;\n            this.sepia.y = 0;\n            this.sepia.alpha = 0.5;\n            this.uiContainer.addChild(this.sepia);\n        }\n    }\n\n    doCheck(key, val, check) {\n        let value = this.values[key];\n        if (!value) {\n            return false;\n        }\n        switch (check) {\n            case 'eq':\n                return value == val;\n            case 'gt':\n                return value > val;\n            case 'lt':\n                return value < val;\n        }\n        console.error('unknown comparator', check);\n        return false;\n    }\n\n    doDetectCollisions(x, y) {\n        this.world && this.world.doDetectCollisions(x, y);\n    }\n\n    registerWorldChangeCallback(fn) {\n        this.worldChangeCallbacks.push(fn);\n    }\n\n    registerEventListeners() {\n        EE.on(E_GO_TO_WORLD, (worldId) => this._setWorld(worldId));\n    }\n\n    _setWorld(id) {\n        console.log(\"Setting world to: \" + id);\n\n        // Break any active event flow on world change\n        EE.emit(E_ABORT_EVENT_FLOW);\n\n        EE.emit(E_START_QUEUING_EVENTS);\n\n        if (this.world) {\n            console.log(\"Removing previous world\");\n            this.container.removeChild(this.world.container);\n        }\n\n        this.world = new World(id);\n        this.container.addChild(this.world.container);\n\n        this.setSepia(this.world.worldSpec.sepia);\n\n        EE.emit(E_SET_CHARACTER_OPACITY, this.world.worldSpec.hideCharacter ? 0 : 1);\n\n        for (let cb of this.worldChangeCallbacks) {\n            cb(this.world, this);\n        }\n\n        EE.emit(E_STOP_QUEUING_EVENTS);\n    }\n}\n\nexport function collidesWith(entity, x, y) {\n    // Character (x, y) is in collision with entity if the following all hold:\n    //\n    // entity_x_position - entity_width/2 <= x <= entity_x_position + entity_width/2\n    // entity_y_position - entity_height/2 <= y <= entity_y_position + entity_height/2\n    //\n    // The character is currently modelled as a particle for this purpose. We\n    // assume entities are anchored at their midpoint.\n\n    const entity_x = entity.sprite.x;\n    const entity_y = entity.sprite.y;\n    const entity_w = entity.sprite.width;\n    const entity_h = entity.sprite.height;\n\n    const collidesX = (entity_x - (entity_w / 2) <= x) && (entity_x + (entity_w / 2) >= x);\n    const collidesY = (entity_y - (entity_h / 2) <= y) && (entity_y + (entity_h / 2) >= y);\n\n    return collidesX && collidesY;\n}\n\nexport function tileToGlobal(size) {\n    return size * TILE_SIZE;\n}\n","/**\n * Returns a random integer between min (inclusive) and max (inclusive)\n * Using Math.round() will give you a non-uniform distribution!\n */\nexport function getRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","import * as PIXI from \"pixi.js\";\n\nimport EE, {\n    E_ADD_HUNGER,\n    E_PLAYER_MOVED, E_SET_WORLD_LOCK,\n    E_ADD_BACKPACK_ITEM,\n    E_DID_UPDATE_BACKPACK_CONTENTS, E_SET_CHARACTER_OPACITY,\n} from \"./events\";\nimport {\n    KeyboardEventHandler,\n    KEY_DOWN,\n    KEY_UP,\n    KEY_LEFT,\n    KEY_RIGHT,\n} from \"./keyboard\";\nimport {\n    collidesWith,\n    tileToGlobal\n} from \"./world\";\nimport yaml from \"js-yaml\";\n\nconst SPRITE_IMAGE = 'public/assets/bunny.png';\nconst MOVE_PER_TICK = 3;\n\nconst STEP_HUNGER_TIME = 20;\nconst STEP_HUNGER_REMOVAL = 1;\n\nclass PlayerMovedContext {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\nexport class Character {\n    constructor() {\n        this.stepTimer = 0;\n        this.container = new PIXI.Container();\n\n        this.animationFrames = {\n            b: this.makeAnimation('b', [1, 2, 3, 2]),\n            f: this.makeAnimation('f', [1, 2, 3, 2]),\n            l: this.makeAnimation('l', [1, 2, 3, 2]),\n            r: this.makeAnimation('r', [1, 2, 3, 2]),\n        };\n\n        this.backpack = new Set();\n\n        let animation = new PIXI.extras.AnimatedSprite(this.animationFrames.r);\n        animation.animationSpeed = 0.1;\n        animation.width = animation.width*0.5;\n        animation.height = animation.height*0.5;\n        animation.anchor.set(0.5, 0.75);\n        animation.play();\n\n        this.container.addChild(animation);\n\n        this.sprite = animation;\n\n        this.moveDown = new KeyboardEventHandler(KEY_DOWN);\n        this.moveUp = new KeyboardEventHandler(KEY_UP);\n        this.moveLeft = new KeyboardEventHandler(KEY_LEFT);\n        this.moveRight = new KeyboardEventHandler(KEY_RIGHT);\n        this.moveDown.bindListeners();\n        this.moveUp.bindListeners();\n        this.moveLeft.bindListeners();\n        this.moveRight.bindListeners();\n\n        this.keyboardTick = this.keyboardTick.bind(this);\n\n        // This may be a bad idea - probably not, it's been here for 9 hours?\n        this.movementLocked = false;\n        EE.on(E_SET_WORLD_LOCK, (x) => {\n            this.movementLocked = x;\n            if (x) {\n                this.sprite.stop();\n            }\n        });\n\n        EE.on(E_ADD_BACKPACK_ITEM, (item) => {\n            this.backpack.add(item);\n            console.log(\"BACKPACK: \", this.backpack);\n            EE.emit(E_DID_UPDATE_BACKPACK_CONTENTS);\n        });\n\n        EE.on(E_SET_CHARACTER_OPACITY, (alpha) => {\n            this.sprite.alpha = alpha;\n        });\n\n        this.velocityX = 0;\n        this.velocityY = 0;\n\n        this.loadPlayerSpec();\n    }\n\n    // No longer used; could be removed?\n    loadPlayerSpec() {\n        let loader = new PIXI.loaders.Loader();\n        loader.add('playerSpec', 'public/assets/player/player.yaml');\n        loader.load((loader, resources) => {\n            this.playerSpec = yaml.safeLoad(resources.playerSpec.data);\n        });\n        loader.onComplete.add(() => {});\n    }\n\n    makeAnimation(dir, idx) {\n        let frames = [];\n        for (let i of idx) {\n            // magically works since the spritesheet was loaded with the pixi loader\n            frames.push(PIXI.Texture.fromFrame('penguin_'+ dir + i + '.png'));\n        }\n        return frames;\n    }\n\n    keyboardTick(delta, world) {\n        if (this.movementLocked) {\n            // If movement is locked don't let the keyboard events\n            // do anything\n            return;\n        }\n\n        const moveBy = delta * MOVE_PER_TICK;\n\n        let hasMoved = false;\n\n        let frames = this.sprite.textures;\n\n        this.velocityX = this.velocityX * 0.2;\n        this.velocityY = this.velocityY * 0.2;\n\n        if (this.moveDown.isKeyDown) {\n            this.velocityY += moveBy;\n            hasMoved = true;\n            frames = this.animationFrames.f;\n        }\n        if (this.moveUp.isKeyDown) {\n            this.velocityY -= moveBy;\n            hasMoved = true;\n            frames = this.animationFrames.b;\n        }\n        let newY = this.sprite.y + this.velocityY;\n        if (world.isPositionOkay(this.sprite.x, newY)) {\n            this.sprite.y = newY;\n        }\n\n        if (this.moveLeft.isKeyDown) {\n            this.velocityX -= moveBy;\n            hasMoved = true;\n            frames = this.animationFrames.r;\n        }\n        if (this.moveRight.isKeyDown) {\n            this.velocityX += moveBy;\n            hasMoved = true;\n            frames = this.animationFrames.l;\n        }\n        let newX = this.sprite.x + this.velocityX;\n        if (world.isPositionOkay(newX, this.sprite.y)) {\n            this.sprite.x = newX;\n        }\n\n        if (hasMoved) {\n            this.stepTimer += delta;\n            if (this.stepTimer > STEP_HUNGER_TIME) {\n                EE.emit(E_ADD_HUNGER, -STEP_HUNGER_REMOVAL);\n                this.stepTimer = 0;\n            }\n\n            // Update the animation\n            if (this.sprite.textures !== frames) {\n                this.sprite.textures = frames;\n            }\n            this.sprite.play();\n            EE.emit(E_PLAYER_MOVED, new PlayerMovedContext(this.sprite.x, this.sprite.y));\n        } else {\n            this.sprite.stop();\n        }\n    }\n\n    getLocation() {\n        return {\n            'x': this.sprite.x,\n            'y': this.sprite.y\n        };\n    }\n\n    setLocation(x, y) {\n        this.sprite.x = x;\n        this.sprite.y = y;\n    }\n\n    getX() {\n        return this.sprite.x;\n    }\n\n    getY() {\n        return this.sprite.y;\n    }\n\n    collidesWith(entity) {\n        return collidesWith(entity, this.sprite.x, this.sprite.y);\n    }\n}\n","import * as PIXI from 'pixi.js';\n\nimport {\n    KeyboardEventHandler,\n    KEY_SPACE,\n} from \"./keyboard\";\n\nconst TEXT_PADDING = 20;\nconst BOX_MARGIN = 20;\n\nexport class TextPrompt {\n    constructor(text, x, y, w, h, conf, parentContainer, finishCallback, speakerName) {\n        this.textLen = 0;\n        this.text = text;\n        this.timer = 0;\n        this.speakerName = speakerName;\n\n        this.finishCallback = finishCallback;\n\n        this.dismissHandler = new KeyboardEventHandler(KEY_SPACE);\n\n        this.container = new PIXI.Container();\n\n        this.textComponent = new PIXI.Text('', new PIXI.TextStyle({\n            fontFamily: 'Tahoma',\n            fontSize: 28,\n            wordWrap: true,\n            wordWrapWidth: w - TEXT_PADDING*2 - BOX_MARGIN*2\n        }));\n\n        this.textComponent.x = x + TEXT_PADDING + BOX_MARGIN;\n        this.textComponent.y = y + TEXT_PADDING + BOX_MARGIN;\n\n        let graphics = TextPrompt._makeBackground(x, y, w, h);\n        this.readyPrompt = TextPrompt._makeReadyPrompt(x, y, w, h);\n\n        this.container.addChild(graphics);\n        this.container.addChild(this.textComponent);\n\n        if (conf.character) {\n            let par = PIXI.loader.resources[conf.character].texture;\n            let sprite = new PIXI.Sprite(par);\n            sprite.scale.x = 0.5;\n            sprite.scale.y = 0.5;\n            sprite.x = BOX_MARGIN;\n            if (conf.flipSide) {\n                sprite.scale.x = -0.5;\n                sprite.x = x - BOX_MARGIN + w;\n            }\n            sprite.y = y-sprite.height+BOX_MARGIN;\n            this.container.addChild(sprite);\n        }\n\n        this.parentContainer = parentContainer;\n        parentContainer.addChild(this.container);\n\n        this.dismissHandler.bindListeners();\n        this.ticker = this.ticker.bind(this);\n    }\n\n    static _makeBackground(x, y, w, h) {\n        let graphics = new PIXI.Graphics();\n        graphics.lineStyle(5, 0xFFFFFF, 1);\n        graphics.beginFill(0xFFFFFF, 0.8);\n        graphics.drawRoundedRect(x+BOX_MARGIN, y+BOX_MARGIN, w-BOX_MARGIN*2, h-BOX_MARGIN*2, 10);\n        graphics.endFill();\n        return graphics;\n    }\n\n    static _makeReadyPrompt(x, y, w, h) {\n        let readyPrompt = new PIXI.Graphics();\n        readyPrompt.lineStyle(0);\n        readyPrompt.beginFill(0x222255, 0.5);\n        readyPrompt.drawRoundedRect(x+w-TEXT_PADDING-40, y+h-TEXT_PADDING-40, 20, 20, 4);\n        readyPrompt.endFill();\n        return readyPrompt;\n    }\n\n    onFinish() {\n        this.finishCallback && this.finishCallback();\n        this.parentContainer.removeChild(this.container);\n    }\n\n    getTextStringWithSpeaker(substr) {\n        let text = '';\n\n        if (this.speakerName) {\n            text = this.speakerName + ': ';\n        }\n\n        text = text + this.text.substr(0, substr);\n        return text\n    }\n\n    ticker(delta) {\n        this.timer += delta;\n        if (this.timer > 1) {\n            this.textLen += 1;\n        }\n\n        // Don't add characters if we've reached it\n        if (!this.finished && this.timer > 1) {\n            this.textComponent.text = this.getTextStringWithSpeaker(this.textLen);\n            this.timer = 0;\n\n            if (this.textLen >= this.text.length) {\n                this.finished = true;\n            }\n        } else if (this.timer > 20) {\n            if (!this._hasprompt) {\n                this.container.addChild(this.readyPrompt);\n                this._hasprompt = true;\n            } else {\n                this.container.removeChild(this.readyPrompt);\n                this._hasprompt = false;\n            }\n            this.timer = 0;\n        }\n\n        if (this.dismissHandler.isKeyDown && !this.flopped) {\n            this.flopped = true;\n            if (!this.finished) {\n                this.textLen = this.text.length;\n            } else {\n                this.onFinish();\n            }\n        }\n        // This is a bit rubbish\n        if (this.dismissHandler.isKeyUp) {\n            this.flopped = false;\n        }\n    }\n}\n","import * as PIXI from \"pixi.js\";\nimport { GameApp } from \"./index\";\n\nexport class Slide {\n    // w and h here are the size of the window\n    constructor(image, parentContainer, worldContainer, conf, finishCallback) {\n        this.image = image;\n        this.parentContainer = parentContainer;\n        this.worldContainer = worldContainer;\n        this.conf = conf;\n        this.finishCallback = finishCallback;\n\n        this.setupContainer();\n\n        if (conf.events) {\n            this.runEvents(conf.events, () => {\n                // If we have no hitboxes, remove the slide\n                if (!conf.hitboxes) {\n                    this.finishCallback && this.finishCallback();\n                    this.parentContainer.removeChild(this.container);\n                }\n            });\n        }\n    }\n\n    setupContainer() {\n        this.container = new PIXI.Container();\n\n        let par = PIXI.loader.resources[this.image].texture;\n        this.sprite = new PIXI.Sprite(par);\n        this.sprite.x = GameApp.renderer.width/2;\n        this.sprite.y = GameApp.renderer.height/2;\n        this.sprite.anchor.set(0.5, 0.5);\n        this.container.addChild(this.sprite);\n\n        let startX = GameApp.renderer.width/2 - this.sprite.width / 2;\n        let startY = GameApp.renderer.height/2 - this.sprite.height / 2;\n\n        for (let hitbox of this.conf.hitboxes || []) {\n            let check = hitbox.showIf;\n            let show = !check ? true :\n                this.worldContainer.doCheck(check.key, check.check, check.case);\n\n            let hitboxarea = new PIXI.Graphics();\n            hitboxarea.beginFill(0x000000, 1);\n            hitboxarea.drawRoundedRect(startX+hitbox.x, startY+hitbox.y, hitbox.w, hitbox.h, 10);\n            hitboxarea.endFill();\n            hitboxarea.interactive = true;\n            hitboxarea.alpha = show ? 0.25 : 0;\n            hitboxarea.on('mousedown', () => this.triggerEvent(hitbox.events));\n            hitboxarea.on('mouseover', () => hitboxarea.alpha = 0.1);\n            hitboxarea.on('mouseout', () => hitboxarea.alpha = show ? 0.25 : 0);\n\n            this.container.addChild(hitboxarea);\n        }\n        this.parentContainer.addChild(this.container);\n    }\n\n    runEvents(events, callback) {\n        this.disabled = true;\n        this.finishCallback && this.finishCallback(events, (aborted) => {\n            this.disabled = false;\n            if (callback) {\n                callback(aborted);\n            }\n        });\n    }\n\n    triggerEvent(events){\n        if (this.disabled) {\n            return;\n        }\n        console.log('clicked on hitbox', events);\n        if (events) {\n            this.runEvents(events, (aborted) => {\n                this.parentContainer.removeChild(this.container);\n                if (aborted) {\n                    this.finishCallback && this.finishCallback();\n                    return;\n                }\n                this.setupContainer();\n            });\n        } else {\n            this.finishCallback && this.finishCallback();\n            this.parentContainer.removeChild(this.container);\n        }\n    }\n\n    ticker(delta){}\n}","import Config from \"./config\";\nimport { KeyboardEventHandler, KEY_ESCAPE } from \"./keyboard\";\nimport { TextPrompt } from \"./textprompt\";\nimport EE, {\n    E_ABORT_EVENT_FLOW, E_RUN_EVENTS, E_SET_WORLD_LOCK,\n    E_START_QUEUING_EVENTS, E_STOP_QUEUING_EVENTS\n} from \"./events\";\nimport { Slide } from \"./slide\";\n\nclass EventQueue {\n    constructor() {\n        this.eventQueue = [];\n    }\n\n    queueEvents(eventSpec, onDone) {\n        this.eventQueue.push({\n            'eventSpec': eventSpec,\n            'onDone': onDone\n        });\n    }\n\n    dispatchQueuedEvents(dispatcher) {\n        let queuedEvents = this.eventQueue;\n        this.eventQueue = [];\n        for (let ev of queuedEvents) {\n            dispatcher(ev.eventSpec, ev.onDone);\n        }\n    }\n}\n\nexport class ActionEventHandler {\n    constructor(w, h, uiContainer, worldContainer) {\n        this.worldWidth = w;\n        this.worldHeight = h;\n        this.uiContainer = uiContainer;\n        this.worldContainer = worldContainer;\n\n        // every event stream invocation gets a key issued from this\n        // monotonically-increasing counter. We can use the key to verify a\n        // stream should continue. When events should abort, we drop all the\n        // currently-running event streams and future callbacks should quite\n        // early.\n        this.currentEventKey = 0;\n\n        this.tickers = [];\n\n        // the list of current running event keys. List because event streams\n        // can be nested.\n        this.currentEventKeys = [];\n\n        this.queueEvents = false;\n        this.eventQueue = new EventQueue();\n\n        EE.on(E_ABORT_EVENT_FLOW, () => {\n            this.currentEventKeys = [];\n        });\n        EE.on(E_START_QUEUING_EVENTS, () => {\n            this.queueEvents = true;\n        });\n        EE.on(E_STOP_QUEUING_EVENTS, () => {\n            this.queueEvents = false;\n            this.abortingFlow = false;\n            this._dispatchQueuedEvents();\n        });\n\n        EE.on(E_RUN_EVENTS, (data, onDone) => {\n            this.runEvents(data, onDone);\n        });\n\n        // Allow the ESC key to abort event flow prematurely when debug mode is\n        // active\n        new KeyboardEventHandler(\n            KEY_ESCAPE,\n            () => {\n                console.log(\"got escape key\");\n                Config.debug && EE.emit(E_ABORT_EVENT_FLOW);\n            }\n        ).bindListeners();\n    }\n\n    // Internal event runner, bypasses the queue\n    _runEvents(eventSpec, onDone, key) {\n        EE.emit(E_SET_WORLD_LOCK, true);\n\n        if (this.currentEventKeys.indexOf(key) <= -1) {\n            this.currentEventKeys.push(key);\n        }\n\n        let events = this.loadEvents(eventSpec);\n        let doEvent = (index) => {\n            console.log('EVENT:', events[index]);\n            const shouldAbort = this._shouldAbortEvent(key);\n            if (!events[index] || shouldAbort) {\n                EE.emit(E_SET_WORLD_LOCK, false);\n                onDone(shouldAbort);\n                return;\n            }\n            events[index](() => doEvent(index+1));\n        };\n        doEvent(0);\n    }\n\n    _getEventKey() {\n        return this.currentEventKey++;\n    }\n\n    _shouldAbortEvent(key) {\n        return this.currentEventKeys.indexOf(key) == -1;\n    }\n\n    runEvents(eventSpec, onDone) {\n        if (this.queueEvents) {\n            this.eventQueue.queueEvents(eventSpec, onDone);\n            return;\n        }\n        this._runEvents(eventSpec, onDone, this._getEventKey());\n    }\n\n    _dispatchQueuedEvents() {\n        this.eventQueue.dispatchQueuedEvents(this._runEvents.bind(this));\n    }\n\n    loadEvents(eventSpec) {\n        let eventChain = [];\n        for (let event of eventSpec) {\n            let eventHandler = this.makeEventHandler(event);\n            if (eventHandler) {\n                eventChain.push(eventHandler);\n            } else {\n                console.error('unknown event handler:', eventHandler);\n            }\n        }\n        return eventChain;\n    }\n\n    makeEventHandler(event) {\n        switch (event.type) {\n        case 'text':\n            return this.newTextHandler(event);\n        case 'slide':\n            return this.newSlideHandler(event);\n        case 'event':\n            return this.newEventDispatcher(event);\n        case 'check':\n            return this.newCheck(event);\n        case 'quit':\n            return this.newQuitEventFlow(event);\n        case 'delay':\n            return this.newDelayEventsFlow(event);\n        }\n        return null;\n    }\n\n    newCheck(event) {\n        return (onFinish) => {\n            let ok = this.worldContainer.doCheck(event.key, event.check, event.case);\n            if (!ok) {\n                this._runEvents(event.events, onFinish, this._getEventKey());\n            } else {\n                onFinish();\n            }\n        };\n    }\n\n    newDelayEventsFlow(event) {\n        return (finishCallback) => {\n            let alreadyFinished = false;\n            let onFinish = () => {\n                (!alreadyFinished) && finishCallback();\n                alreadyFinished = true;\n            };\n\n            let callback = () => {\n                this._runEvents(event.events, () => {}, this._getEventKey());\n                onFinish();\n            };\n\n            if (event.async) {\n                // Surprise! We're async. Dispatch the \"finish\" event\n                // immediately so we move to the next one\n                onFinish();\n            }\n\n            window.setTimeout(callback, event.content * 1000);\n        };\n    }\n\n    newTextHandler(event) {\n        return (onFinish) => {\n            let prompt;\n            let finishHandler = () => {\n                const index = this.tickers.indexOf(prompt);\n                this.tickers.splice(index, 1);\n                onFinish();\n            };\n            prompt = new TextPrompt(\n                event.text,\n                0, this.worldHeight - 200, this.worldWidth, 200,\n                event, this.uiContainer, finishHandler,\n                event.speaker_name\n            );\n            this.tickers.push(prompt);\n            return prompt;\n        };\n    }\n\n    newSlideHandler(event) {\n        return (onFinish) => {\n            let slide;\n            let finishHandler = (events, done) => {\n                if (!events) {\n                    const index = this.tickers.indexOf(slide);\n                    this.tickers.splice(index, 1);\n                    onFinish();\n                } else {\n                    this._runEvents(events, done, this._getEventKey());\n                }\n            };\n            slide = new Slide(\n                event.image, this.uiContainer, this.worldContainer,\n                event, finishHandler\n            );\n            this.tickers.push(slide);\n            return slide;\n        };\n    }\n\n    newEventDispatcher(event) {\n        return (onFinish) => {\n            EE.emit(event.event, event.content);\n            onFinish();\n        };\n    }\n\n    newQuitEventFlow(event) {\n        return (onFinish) => {\n            EE.emit(E_ABORT_EVENT_FLOW);\n            onFinish();\n        };\n    }\n\n    ticker(delta) {\n        for (let ticker of this.tickers) {\n            ticker.ticker(delta);\n        }\n    }\n}\n","import * as PIXI from \"pixi.js\";\nimport EE, { E_ADD_HUNGER, E_RUN_EVENTS } from \"./events\";\n\nexport class HungerMeter {\n    constructor() {\n        this.hunger = 100;\n\n        this.container = new PIXI.Container();\n\n        let graphics = new PIXI.Graphics();\n        graphics.lineStyle(4, 0xFFFFFF, 1);\n        graphics.beginFill(0xFFFFFF, 0.8);\n        graphics.drawRoundedRect(80, 20, 200, 30, 5);\n        graphics.endFill();\n\n        this.container.addChild(graphics);\n        this.setBar();\n\n        let fishIcon = new PIXI.Sprite(PIXI.loader.resources['fish'].texture);\n        fishIcon.anchor.set(0.5);\n        fishIcon.x = 40;\n        fishIcon.y = 35;\n        fishIcon.scale.x = 0.7;\n        fishIcon.scale.y = 0.7;\n        fishIcon.rotation = -Math.PI / 7;\n        this.container.addChild(fishIcon);\n\n        EE.on(E_ADD_HUNGER, (diff) => {\n            this.addHunger(diff);\n        });\n    }\n\n    setBar() {\n        if (this.bar) {\n            this.container.removeChild(this.bar);\n        }\n        this.bar = new PIXI.Graphics();\n\n        let colour = 0xFFA500;\n        if (this.hunger < 25) {\n            colour = 0xFF0000;\n        }\n        this.bar.beginFill(colour, 0.8);\n        this.bar.drawRoundedRect(80, 20,\n            200 * (this.hunger / 100),\n            30, 5);\n        this.bar.endFill();\n\n        this.container.addChild(this.bar);\n    }\n\n    getComponent() {\n        return this.container;\n    }\n\n    addHunger(diff) {\n        this.hunger += diff;\n        if (this.hunger > 100) {\n            this.hunger = 100;\n        }\n\n        if (this.hunger <= 0) {\n            this.hunger = 0;\n            // TODO: we should do something better?\n            EE.emit(E_RUN_EVENTS, [{\n                type: 'text',\n                text: 'You have run out of food!',\n            }, {\n                type: 'slide',\n                image: 'black_slide',\n                events: [{\n                    type: 'text',\n                    text: '...                                \\nTux blacked out.' // Oh yeah >:)\n                }]\n            }], () => {\n                this.hunger = 100;\n                this.setBar();\n            });\n        } else {\n            this.setBar();\n        }\n    }\n}","import * as PIXI from \"pixi.js\";\nimport {Emitter} from \"pixi-particles\";\n\nimport EE, { E_SET_WEATHER_INTENSITY } from \"./events\";\nimport { GameApp } from \"./index\";\n\nlet snowEmitter;\n\nexport function newSnow(container) {\n    // Create a new emitter\n    snowEmitter = new Emitter(\n        container,\n        [PIXI.loader.resources['snow'].texture],\n\n        // Emitter configuration, edit this to change the look\n        // of the emitter\n        {\n            \"alpha\": {\n                \"start\": 1,\n                \"end\": 0\n            },\n            \"scale\": {\n                \"start\": 0.2,\n                \"end\": 0.2,\n                \"minimumScaleMultiplier\": 1\n            },\n            \"color\": {\n                \"start\": \"#ffffff\",\n                \"end\": \"#ffffff\"\n            },\n            \"speed\": {\n                \"start\": 50,\n                \"end\": 50,\n                \"minimumSpeedMultiplier\": 0.001\n            },\n            \"acceleration\": {\n                \"x\": 0,\n                \"y\": 0\n            },\n            \"maxSpeed\": 0,\n            \"startRotation\": {\n                \"min\": 40,\n                \"max\": 50\n            },\n            \"noRotation\": true,\n            \"rotationSpeed\": {\n                \"min\": 0,\n                \"max\": 0\n            },\n            \"lifetime\": {\n                \"min\": 3,\n                \"max\": 6\n            },\n            \"blendMode\": \"normal\",\n            \"frequency\": 0.01,\n            \"emitterLifetime\": -1,\n            \"maxParticles\": 500,\n            \"pos\": {\n                \"x\": 0,\n                \"y\": 0\n            },\n            \"addAtBack\": false,\n            \"spawnType\": \"rect\",\n            \"spawnRect\": {\n                \"x\": 0,\n                \"y\": 0,\n                \"w\": GameApp.renderer.width,\n                \"h\": GameApp.renderer.height\n            }\n        }\n    );\n\n    // Start emitting\n    snowEmitter.emit = true;\n\n    let time = 1000;\n\n    // Update function every frame\n    return function (delta) {\n        time += delta;\n\n        // The snowEmitter requires the elapsed\n        // number of seconds since the last update\n        snowEmitter.update(time * 0.0001);\n    };\n}\n\nEE.on(E_SET_WEATHER_INTENSITY, (intensity) => {\n    snowEmitter.maxParticles = intensity * 50000;\n    snowEmitter.spawnChance = intensity;\n\n    snowEmitter.minimumSpeedMultiplier = intensity;\n});\n","import * as PIXI from \"pixi.js\";\nimport EE, {\n    E_SET_GLOBAL,\n    E_SET_TEMPRATURE,\n    E_SET_WEATHER_INTENSITY\n} from \"./events\";\n\nexport class Thermometer {\n    constructor() {\n        this.temperature = 50;\n\n        this.container = new PIXI.Container();\n\n        let graphics = new PIXI.Graphics();\n        graphics.lineStyle(3, 0xFFFFFF, 1);\n        graphics.beginFill(0xFFFFFF, 0.8);\n        graphics.drawRoundedRect(80, 70, 200, 15, 7.5);\n        graphics.endFill();\n\n        graphics.lineStyle(3, 0xFFFFFF, 1);\n        graphics.beginFill(0xFF0000, 1);\n        graphics.drawCircle(93, 77.5, 15);\n        graphics.endFill();\n\n        this.container.addChild(graphics);\n        this.setBar();\n\n        let thermoIcon = new PIXI.Sprite(PIXI.loader.resources['thermo'].texture);\n        thermoIcon.anchor.set(0.5);\n        thermoIcon.x = 40;\n        thermoIcon.y = 79;\n        thermoIcon.scale.x = 0.7;\n        thermoIcon.scale.y = 0.7;\n        this.container.addChild(thermoIcon);\n\n        EE.on(E_SET_TEMPRATURE, (temp) => {\n            this.setTemperature(temp);\n        });\n        EE.on(E_SET_WEATHER_INTENSITY, intensity => {\n            this.temperature = 20 + (50-intensity*50);\n            this.setBar();\n        });\n\n        this.container.alpha = 0;\n        EE.on(E_SET_GLOBAL, (vals) => {\n            if (vals.keys === 'thermometer' && vals.value) {\n                this.container.alpha = 1;\n            }\n        });\n    }\n\n    setBar() {\n        if (this.bar) {\n            this.container.removeChild(this.bar);\n        }\n        this.bar = new PIXI.Graphics();\n\n        this.bar.beginFill(0xFF0000, 1);\n        this.bar.drawRoundedRect(80, 71,\n            200 * (this.temperature / 100),\n            14, 7.5);\n\n        this.container.addChild(this.bar);\n    }\n\n    getComponent() {\n        return this.container;\n    }\n\n    setTemperature(value) {\n        this.temperature = value;\n        this.setBar();\n    }\n}","import '../styles/index.scss';\nimport * as PIXI from 'pixi.js';\nimport yaml from \"js-yaml\";\n\nimport { BackpackBar } from \"./backpack\";\nimport { Character } from \"./character\";\nimport EE, {\n    E_ENTITY_DISPATCH_ACTIONS,\n    E_GO_TO_WORLD,\n    E_PLAYER_MOVED, E_SET_WEATHER_INTENSITY,\n    E_DID_UPDATE_BACKPACK_CONTENTS,\n} from \"./events\";\nimport { WorldContainer, tileToGlobal } from \"./world\";\nimport { ActionEventHandler } from \"./actionEvents\";\n\nimport { LOCAL_DEFAULT_WORLD_ID } from \"./localsettings\";\nimport { HungerMeter } from \"./hunger\";\nimport { newSnow } from \"./particles\";\nimport { Thermometer } from \"./thermometer\";\n\nconst DEFAULT_WORLD_ID = LOCAL_DEFAULT_WORLD_ID || 4;\n\nfunction getBackground(texture, width, height) {\n    let tilingBackground = new PIXI.extras.TilingSprite(\n        texture, width, height\n    );\n    tilingBackground.anchor.set(0.5);\n    tilingBackground.tileScale.set(0.5);\n    return tilingBackground;\n}\n\nfunction getClouds(texture, width, height) {\n    let tilingBackground = new PIXI.extras.TilingSprite(\n        texture, width, height\n    );\n    tilingBackground.anchor.set(0.5);\n    tilingBackground.tileScale.set(2);\n    tilingBackground.alpha = 0.2;\n\n    EE.on(E_SET_WEATHER_INTENSITY, intensity => {\n        tilingBackground.alpha = intensity;\n    });\n\n    // console.log(PIXI.BLEND_MODES);\n    tilingBackground.blendMode = PIXI.BLEND_MODES['SCREEN'];\n    return tilingBackground;\n}\n\nexport const FULL_WIDTH = false;\n\nexport const GameApp = new PIXI.Application(\n    FULL_WIDTH ? window.innerWidth : 1024,\n    FULL_WIDTH ? window.innerHeight : 768,\n    {backgroundColor: 0x1099bb}\n);\n\nlet backpack = new Set();\n\nfunction initGame(loader, resources) {\n    console.log(resources);\n    document.body.appendChild(GameApp.view);\n\n    let background = getBackground(\n        resources['sea_background'].texture,\n        window.innerWidth * 10,\n        window.innerHeight * 10\n    );\n    GameApp.stage.addChild(background);\n    let bgTicker = 0;\n    GameApp.ticker.add(t => {\n        bgTicker += t;\n        background.x = Math.sin(bgTicker/200) * 32;\n        background.y = Math.cos(bgTicker/125) * 32;\n\n        background.scale.x = 1 + Math.sin(bgTicker/500) * 0.04;\n        background.scale.y = 1 + Math.cos(bgTicker/400) * 0.04;\n    });\n\n    let uiContainer = new PIXI.Container();\n\n    let worldContainer = new WorldContainer(uiContainer);\n    GameApp.stage.addChild(worldContainer.container);\n\n    let character = new Character(backpack);\n    GameApp.stage.addChild(character.container);\n\n    worldContainer.registerWorldChangeCallback((world) => {\n        const startingPosition = world.getStartingPosition();\n        character.setLocation(\n            tileToGlobal(startingPosition.x),\n            tileToGlobal(startingPosition.y)\n        );\n    });\n    worldContainer.registerWorldChangeCallback((_, worldContainer) => {\n        let { x, y } = character.getLocation();\n        worldContainer.doDetectCollisions(x, y);\n    });\n\n    // Add the clouds\n    let clouds = getClouds(\n        resources['cloud'].texture,\n        window.innerWidth * 10,\n        window.innerHeight * 10\n    );\n    GameApp.stage.addChild(clouds);\n\n    let snowEmitter = newSnow(uiContainer);\n    GameApp.ticker.add(snowEmitter);\n\n    let hungerMeter = new HungerMeter();\n    uiContainer.addChild(hungerMeter.getComponent());\n\n    let backpackBar = new BackpackBar();\n    let backpackComponent = backpackBar.getComponent();\n    uiContainer.addChild(backpackComponent);\n    EE.on(E_DID_UPDATE_BACKPACK_CONTENTS, () => {\n        backpackBar.renderBackpack(character.backpack);\n        backpackComponent.x = (\n            GameApp.renderer.width - backpackComponent.width\n        );\n    });\n\n    let thermometer = new Thermometer();\n    uiContainer.addChild(thermometer.getComponent());\n\n    let eventHandler = new ActionEventHandler(\n        GameApp.screen.width,\n        GameApp.screen.height,\n        uiContainer,\n        worldContainer\n    );\n    EE.on(E_ENTITY_DISPATCH_ACTIONS, (context) => { eventHandler.runEvents(context, () => {}); });\n    EE.on(E_PLAYER_MOVED, (context) => worldContainer.doDetectCollisions(context.x, context.y));\n\n    GameApp.stage.addChild(uiContainer);\n\n    // Text prompt update\n    GameApp.ticker.add(t => {\n        eventHandler.ticker(t);\n    });\n\n    let par = PIXI.loader.resources['vignette'].texture;\n    let vignette = new PIXI.Sprite(par);\n    vignette.width = GameApp.renderer.width;\n    vignette.height = GameApp.renderer.height;\n    GameApp.stage.addChild(vignette);\n\n    // Character position updates\n    GameApp.ticker.add(t => {\n        worldContainer.world.ticker(t, character);\n        character.keyboardTick(t, worldContainer.world);\n        GameApp.stage.pivot.x = character.getX() - GameApp.renderer.width / 2;\n        GameApp.stage.pivot.y = character.getY() - GameApp.renderer.height / 2;\n\n        let xx = character.getX() - GameApp.renderer.width / 2;\n        let yy = character.getY() - GameApp.renderer.height / 2;\n        uiContainer.x = xx;\n        uiContainer.y = yy;\n        vignette.x = xx;\n        vignette.y = yy;\n    });\n\n    window.setWorld = (worldId) => { EE.emit(E_GO_TO_WORLD, worldId); };\n}\n\nfunction start() {\n    EE.emit(E_GO_TO_WORLD, DEFAULT_WORLD_ID);\n}\n\nfunction loadRootAssets() {\n    PIXI.loader\n        .add('sea_background', 'public/assets/sea.png')\n        .add('public/assets/penguin/penguin2.json')\n        .add('scratchcat', 'public/assets/sprites/scratchcat.png')\n        .add('berg', 'public/assets/sprites/berg.png')\n        .add('fish', 'public/assets/sprites/fish.png')\n        .add('thermo', 'public/assets/sprites/thermo.png')\n        .add('berg_big', 'public/assets/sprites/berg_big.png')\n        .add('walrus', 'public/assets/sprites/walrus.png')\n        .add('bear', 'public/assets/sprites/bear.png')\n        .add('iceicebaby', 'public/assets/sprites/iceicebaby.jpg')\n        .add('tuxside', 'public/assets/penguin/tux_side.png')\n        .add('walrusside', 'public/assets/penguin/walrus_side.png')\n        .add('bearside', 'public/assets/penguin/bear_side.png')\n        .add('piratewalrusside', 'public/assets/penguin/pirate_walrus_side.png')\n        .add('water_slide', 'public/assets/slides/water_slide.png')\n        .add('snow_slide', 'public/assets/slides/snow_slide.png')\n        .add('brochure', 'public/assets/slides/brochure.png')\n        .add('select_items', 'public/assets/slides/select_items.png')\n        .add('vignette', 'public/assets/vignette.png')\n        .add('snow', 'public/assets/particles/snow.png')\n        .add('cloud', 'public/assets/particles/cloud.png')\n        .add('splash', 'public/assets/slides/splash.png')\n        .add('ice_1_slide', 'public/assets/slides/ice_1_slide.png')\n        .add('ice_2_slide', 'public/assets/slides/ice_2_slide.png')\n        .add('sepia', 'public/assets/slides/sepia.png')\n        .add('black_slide', 'public/assets/slides/black_slide.png')\n        .add('empty', 'public/assets/sprites/empty.png')\n        .add('station', 'public/assets/sprites/station.png')\n        .add('station2', 'public/assets/sprites/station2.png')\n        .load((loader, resources) => {\n            initGame(loader, resources);\n            start();\n        });\n}\n\nlet worldLoader = new PIXI.loaders.Loader();\nworldLoader.add('worlds', 'public/assets/worlds/worlds.yaml');\nworldLoader.load((loader, resources) => {\n    const worlds = yaml.safeLoad(resources['worlds'].data);\n    for (let world of worlds) {\n        PIXI.loader\n            .add('world' + world + '_spec', 'public/assets/worlds/world' + world + '.yaml')\n            .add('world' + world + '_tiles', 'public/assets/worlds/world' + world + '.csv');\n    }\n});\nworldLoader.onComplete.add(() => { loadRootAssets(); });\n","export const LOCAL_DEFAULT_WORLD_ID = '1';\n"],"sourceRoot":""}